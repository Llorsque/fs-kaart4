
:root{
  --brand:#212945;
  --accent:#52E8E8;
  --bg:#f7f8fb;
  --ink:#0f172a;
  --muted:#64748b;
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family:"Archivo", system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
  color:var(--ink);
  background:var(--bg);
}

.container{ width:min(1200px, 94vw); margin-inline:auto; }

.site-header{
  background:linear-gradient(135deg, var(--brand), #1b2036 60%);
  color:#fff;
  padding:2rem 0 1.2rem;
  border-bottom:4px solid var(--accent);
}
.site-header h1{ margin:0 0 .25rem; font-size:clamp(1.6rem, 2.2vw + 1rem, 2.4rem); letter-spacing:.2px; }
.site-header p{ margin:.25rem 0 .75rem; color:#e6eefc }

.layout{
  display:grid;
  grid-template-columns: 320px 1fr;
  gap:1rem;
  align-items:start;
  margin-block:1rem 1.5rem;
}

.sidebar{
  position:sticky;
  top:12px;
  align-self:start;
}

.panel{
  background:#fff;
  border:1px solid #e2e8f0;
  border-radius:.8rem;
  padding:1rem;
  margin-bottom:1rem;
  box-shadow:0 2px 16px rgba(15,23,42,.06);
}
.panel-title{
  margin:0 0 .6rem;
  font-size:1.05rem;
  font-weight:700;
}

.uploader{ display:flex; gap:.5rem; align-items:center; flex-wrap:wrap; }
#fileInput{
  background:#fff; border:2px dashed rgba(0,0,0,.15); color:#0b1222;
  padding:.65rem .8rem; border-radius:.8rem;
}
.btn-secondary{
  background:transparent; color:#0f172a; border:1px solid #e2e8f0;
  padding:.6rem .9rem; border-radius:.8rem; cursor:pointer;
}
.btn-secondary:hover{ background:#f1f5f9 }

.help{ font-size:.94rem; color:#64748b; }
.help.small{ font-size:.86rem; color:#64748b; }
#status{ margin-top:.5rem; font-size:.95rem; color:#0f172a; }

.filters{ display:flex; flex-direction:column; gap:.5rem; }
.filter-dropdown{ position:relative; }
.dropdown-toggle{
  background:#fff; color:#0f172a; border:1px solid #e2e8f0; border-radius:.6rem; padding:.5rem .75rem; cursor:pointer;
  display:flex; gap:.4rem; align-items:center; width:100%; justify-content:space-between;
}
.dropdown-toggle .selection{ color:#64748b; margin-left:.25rem; }
.dropdown-menu{
  position:absolute; top:calc(100% + 6px); left:0; min-width:100%;
  background:#fff; border:1px solid #e2e8f0; border-radius:.6rem; padding:.6rem .6rem;
  box-shadow:0 8px 24px rgba(15,23,42,.12); display:none; z-index:10;
}
.dropdown-menu.open{ display:block; }
.dropdown-menu label{ display:flex; gap:.5rem; align-items:center; padding:.25rem .2rem; cursor:pointer; }
.dropdown-actions{ display:flex; justify-content:space-between; gap:.4rem; margin-top:.5rem; }

.btn-link{ background:none; border:none; color:#2563eb; cursor:pointer; padding:.25rem .4rem; }
.btn-apply{ background:var(--accent); border:none; color:#042027; padding:.35rem .6rem; border-radius:.5rem; cursor:pointer; font-weight:600; }

.map-wrap{ min-height:75vh; }
#map{
  height:75vh; width:100%;
  border-radius:1rem; border:1px solid #e2e8f0; box-shadow:0 2px 24px rgba(15,23,42,.08);
}

.notes{ color:#0f172a; }

.site-footer{ border-top:1px solid #e2e8f0; background:#fff; color:#0f172a; padding:1rem 0; text-align:center; }


  .sidebar{
    position:static;
  }
}

/* --- FIX: keep sidebar left, raise dropdown z-index, prevent map overlay --- */
.layout{
  display:grid;
  grid-template-columns: 340px minmax(0,1fr) !important;
  gap:1rem;
  align-items:start;
  margin-block:1rem 1.5rem;
}
.sidebar{ position:sticky; top:12px; align-self:start; z-index: 2; }
.map-wrap{ position:relative; z-index: 0; overflow: visible; }

/* Dropdown must float above map */
.filter-dropdown{ position:relative; z-index: 3; }
.dropdown-menu{
  position:absolute;
  top:calc(100% + 6px);
  left:0;
  min-width:100%;
  background:#fff;
  border:1px solid #e2e8f0;
  border-radius:.6rem;
  padding:.6rem .6rem;
  box-shadow:0 8px 24px rgba(15,23,42,.18);
  display:none;
  z-index: 2000; /* above Leaflet tiles/controls */
}

/* Ensure Leaflet map doesn't sit above UI */
.leaflet-pane, .leaflet-pane * { z-index: 1; }
